<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>learn</title>
	<meta name='viewport' content='width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0'>
	<script src='js/vendor/three.js/build/three.js'></script>
	<!-- jsartookit -->
	<script src='js/vendor/jsartoolkit5/build/artoolkit.min.js'></script>
	<script src='js/vendor/jsartoolkit5/js/artoolkit.api.js'></script>
	<!-- include threex.artoolkit -->
	<script src='js/vendor/threex/threex-artoolkitsource.js'></script>
	<script src='js/vendor/threex/threex-artoolkitcontext.js'></script>
	<script src='js/vendor/threex/threex-artoolkitprofile.js'></script>
	<script src='js/vendor/threex/threex-arbasecontrols.js'></script>
	<script src='js/vendor/threex/threex-armarkercontrols.js'></script>
	<script src='js/vendor/threex/threex-arsmoothedcontrols.js'></script>
</head>
<body >
	<script type="text/javascript">
		var renderer = new THREE.WebGLRenderer({
			    alpha: true
		    });
			renderer.setClearColor(new THREE.Color('lightgrey'), 0)
			renderer.setSize( window.innerWidth, window.innerHeight );
			renderer.domElement.style.position = 'absolute'
			renderer.domElement.style.top = '0px'
			renderer.domElement.style.left = '0px'
			document.body.appendChild( renderer.domElement );
			//调用摄像头
		    var arToolkitSource = new THREEx.ArToolkitSource({
				// to read from the webcam 
				sourceType : 'webcam',
			})
			arToolkitSource.init(function onReady(){
				// handle resize of renderer
				arToolkitSource.onResize(renderer.domElement)		
			})

			/*渲染器（Renderer）*/
			// var renderer = new THREE.WebGLRenderer({//获取canvas
			//     canvas: document.getElementById('mainCanvas')
			// });
			//如想要Three.js生成Canvas元素，在HTML中就不需要定义Canvas元素，在JavaScript代码中可以这样写：
			//var renderer = new THREE.WebGLRenderer();
			//renderer.setSize(400, 300);
			//document.getElementsByTagName('body')[0].appendChild(renderer.domElement);//将渲染器对应的Canvas元素添加到<body>中
			//renderer.setClearColor(0x000000);//我们可以使用此代码将背景色（用于清除画面的颜色）设置为黑色
			/*场景（Scene）*/
			var scene = new THREE.Scene();
			/*照相机（Camera）*/
			  //公式：THREE.OrthographicCamera(left, right, top, bottom, near, far)
			  //为了保持照相机的横竖比例，需要保证(right - left)与(top - bottom)的比例与Canvas宽度与高度的比例一致，为了保证场景中的物体不会因为太近或太远而被照相机忽略，一般near的值设置得较小，far的值设置得较大
			var camera = new THREE.Camera();
			scene.add(camera);
			var arToolkitContext = new THREEx.ArToolkitContext({
				cameraParametersUrl: '../../data/data/camera_para.dat',
				detectionMode: 'mono',
				maxDetectionRate: 30,
				canvasWidth: 80*3,
				canvasHeight: 60*3,
			})
			// initialize it
			arToolkitContext.init(function onCompleted(){
				// copy projection matrix to camera
				camera.projectionMatrix.copy( arToolkitContext.getProjectionMatrix() );
			})
			/*形状*/
			var geometry	= new THREE.CubeGeometry(1,1,1);
			var cube = new THREE.Mesh(new THREE.SphereGeometry(3, 18, 6),
		        new THREE.MeshBasicMaterial({//MeshBasicMaterial大致可以猜测出这是一种材质，可以用来设置物体的颜色
		            color: 0x34cfb4,
		            wireframe: true
		        })
			);
			var mesh = new THREE.Mesh( geometry, cube );
			var markerRoot = new THREE.Group
			scene.add(markerRoot);
			markerRoot.add(mesh);
			onRenderFcts.push(function(){
				mesh.rotation.x += 0.1
			})
			var markerRoot = new THREE.Group
			scene.add(markerRoot);
			var artoolkitMarker = new THREEx.ArMarkerControls(arToolkitContext, markerRoot, {
				type : 'pattern',
				patternUrl : '../../data/multi/open.td'
				// patternUrl : '../../data/data/patt.kanji'
			})

			var stats = new Stats();
			document.body.appendChild( stats.dom );
			// render the scene
			onRenderFcts.push(function(){
				renderer.render( scene, camera );
				stats.update();
			})
			
				
	</script>
</body>
</html>